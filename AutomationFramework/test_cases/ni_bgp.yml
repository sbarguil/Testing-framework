
- testcase:
      name: ni_bgp_as
      id: 1
      description: >
          This test is to set as-number for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_as.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPLS_15"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   as: "1" 

- testcase:
      name: ni_bgp_router_id
      id: 2
      description: >
          This test is to set router-id for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_router_id.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPLS_19"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   router_id: "21.1.1.3"
                   as: "2"

- testcase:
      name: ni_bgp_neighbor_address
      id: 3
      description: >
          This test is to set neighbor-address for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_neighbor_address.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120"
                   as: "2"

- testcase:
      name: ni_bgp_peer_as
      id: 4
      description: >
          This test is to set a neighbor peer-as for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_peer_as.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120" 
                   peer_as: "65123"
                   as: "2"

- testcase:
      name: ni_bgp_local_as
      id: 5
      description: >
          This test is to set a neighbor local-as for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_local_as.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120"
                   local_as: "65001"
                   peer_as: "65123"
                   as: "2"

- testcase:
      name: ni_bgp_peer_type
      id: 6
      description: >
          This test is to set a neighbor peer-type for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_peer_type.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120"
                   peer_type: "EXTERNAL"
                   as: "2"

- testcase:
      name: ni_bgp_remove_private_as
      id: 7
      description: >
          This test is to set a neighbor remove-private-as parameter for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_remove_private_as.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120"
                   as: "2"
                   remove_private_as: "oc-bgp-types:PRIVATE_AS_REMOVE_ALL"

- testcase:
      name: ni_bgp_description
      id: 8
      description: >
          This test is to set a neighbor description for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_description.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_120"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.120"
                   description: "BGP Neighbor 65123 Description"
                   peer_as: "65123"
                   as: "2"

- testcase:
      name: ni_bgp_import_policy
      id: 9
      description: >
          This test is to set a neighbor import-policy for a BGP instance within a L3 network-instance.
      rpcs:

          - template: rp_policy_def_name.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "ROUTING_POLICY_EXPORT"

          - template: ni_bgp_import_policy.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_130"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.130"
                   import_export_bgp_policy: "ROUTING_POLICY_EXPORT"
                   peer_as: "300"

- testcase:
      name: ni_bgp_export_policy
      id: 10
      description: >
          This test is to set a neighbor export-policy for a BGP instance within a L3 network-instance.
      rpcs:
          - template: rp_policy_def_name.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "ROUTING_POLICY_EXPORT"

          - template: ni_bgp_export_policy.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_133"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.130"
                   import_export_bgp_policy: "ROUTING_POLICY_EXPORT"

- testcase:
      name: ni_bgp_enabled
      id: 11
      description: >
          This test is to enable a neighbor multihop for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_enabled.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_130"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.120.130"
                   as: "65123"
                   enabled: "true"

- testcase:
      name: ni_bgp_multihop_ttl
      id: 12
      description: >
          This test is to set a neighbor multihop-ttl parameter for a BGP instance within a L3 network-instance.
      rpcs:
          - template: ni_bgp_multihop_ttl.xml
            target: running
            operation: edit-config
            commit: true
            params:
                   name: "VPRN_130"
                   identifier: "oc-pol-types:BGP"
                   protocol_name: "BGP_65000"
                   neighbor_address: "192.168.1.2"
                   multihop_ttl: "3"
                   as: "65000"
                   peer_as: "65123"
